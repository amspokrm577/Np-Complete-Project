import unittest
from maxclique import main as maxclique_
from unittest.mock import patch
from io import StringIO

class TestFiles(unittest.TestCase):
    @patch('sys.stdout', new_callable=StringIO)
    def testWholeGraphIsMaxClique(self, mock_out):
        with patch('sys.stdin', new = StringIO(
        """15
        1 2
        1 3
        1 4
        1 5
        1 6
        2 3
        2 4
        2 5
        2 6
        3 4
        3 5
        3 6
        4 5
        4 6
        5 6
        """)):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            '1 2 3 4 5 6\n')

    @patch('sys.stdout', new_callable=StringIO)
    def testRandomInput1(self, mock_out):
        with patch('sys.stdin', new = StringIO(
       """41
        1 2
        1 3
        1 4
        1 5
        1 6
        1 7
        12 5
        12 8
        16 7
        13 8
        13 9
        14 6
        15 12
        16 2
        1 8
        2 3
        2 4
        2 5
        2 6
        2 7
        2 8
        3 4
        3 5
        3 6
        3 7
        3 8
        4 5
        4 6
        4 7
        4 8
        5 6
        5 7
        5 8
        6 7
        6 8
        7 8
        9 2
        10 4
        10 11
        11 4
        11 2
        """
        )):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            '1 2 3 4 5 6 7 8\n')

    @patch('sys.stdout', new_callable=StringIO)
    def testRandomInput2(self, mock_out):
        with patch('sys.stdin', new = StringIO(
        """64
        16 17
        14 12
        13 2
        17 9
        4 7
        9 8
        6 3
        2 8
        19 20
        18 19
        19 20
        18 20
        1 2
        1 3
        1 4
        1 5
        1 6
        1 7
        1 8 
        1 9
        2 1
        2 3
        2 4
        2 5
        2 6
        2 7
        2 8
        2 9
        3 4
        3 5
        3 6
        3 7
        3 8
        3 9
        4 5
        4 6
        4 7
        4 8
        4 9
        5 6
        5 7
        5 8
        5 9
        6 7
        6 8
        6 9
        7 8
        7 9
        8 9
        10 1
        10 2
        10 3
        10 4
        11 12
        11 13
        11 14
        11 15
        12 13
        12 14
        12 15
        13 14
        13 15
        13 16
        14 15
        """)):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            '2 9 4 7 8 6 3 1 5\n')
    
    #takes a couple minutes
    @patch('sys.stdout', new_callable=StringIO)
    def testRandomInput3(self, mock_out):
        with patch('sys.stdin', new = StringIO(
        """198
        21 2
        1 2
        1 3
        1 4
        22 4
        1 5
        21 5
        22 3
        1 6
        1 7
        23 9
        24 0
        25 23
        23 24
        1 8
        1 9
        1 10
        1 11
        1 12
        1 13
        1 14
        1 15
        1 16
        1 17
        1 18
        1 19
        1 20
        2 3
        2 4
        2 5
        2 6
        2 7
        2 8
        2 9
        2 10
        2 11
        2 12
        2 13
        2 14
        2 15
        2 16
        2 17
        2 18
        2 19
        2 20
        3 4
        3 5
        3 6
        3 7
        3 8
        3 9
        3 10
        3 11
        3 12
        3 13
        3 14
        3 15
        3 16
        3 17
        3 18
        3 19
        3 20
        4 5
        4 6
        4 7
        4 8
        4 9
        4 10
        4 11
        4 12
        4 13
        4 14
        4 15
        4 16
        4 17
        4 18
        4 19
        4 20
        5 6
        5 7
        5 8
        5 9
        5 10
        5 11
        5 12
        5 13
        5 14
        5 15
        5 16
        5 17
        5 18
        5 19
        5 20
        6 7
        6 8
        6 9
        6 10
        6 11
        6 12
        6 13
        6 14
        6 15
        6 16
        6 17
        6 18
        6 19
        6 20
        7 8
        7 9
        7 10
        7 11
        7 12
        7 13
        7 14
        7 15
        7 16
        7 17
        7 18
        7 19
        7 20
        8 9
        8 10
        8 11
        8 12
        8 13
        8 14
        8 15
        8 16
        8 17
        8 18
        8 19
        8 20
        9 10
        9 11
        9 12
        9 13
        9 14
        9 15
        9 16
        9 17
        9 18
        9 19
        9 20
        10 11
        10 12
        10 13
        10 14
        10 15
        10 16
        10 17
        10 18
        10 19
        10 20
        11 12
        11 13
        11 14
        11 15
        11 16
        11 17
        11 18
        11 19
        11 20
        12 13
        12 14
        12 15
        12 16
        12 17
        12 18
        12 19
        12 20
        13 14
        13 15
        13 16
        13 17
        13 18
        13 19
        13 20
        14 15
        14 16
        14 17
        14 18
        14 19
        14 20
        15 16
        15 17
        15 18
        15 19
        15 20
        16 17
        16 18
        16 19
        16 20
        17 18
        17 19
        17 20
        18 19
        18 20
        19 20
        """)):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            '2 1 3 4 5 6 7 9 8 10 11 12 13 14 15 16 17 18 19 20\n')

    @patch('sys.stdout', new_callable=StringIO)
    def testRandomInput4(self, mock_out):
        with patch('sys.stdin', new = StringIO(
        """204
        21 2
        1 2
        1 3
        1 4
        22 4
        1 5
        21 5
        22 3
        1 6
        1 10
        1 11
        1 12
        1 13
        1 14
        1 15
        1 16
        1 17
        1 18
        1 7
        23 9
        24 0
        25 23
        17 20
        18 19
        18 20
        19 20
        13 15
        23 13
        13 16
        13 17
        13 18
        13 19
        13 20
        14 15
        14 16
        15 17
        15 18
        23 24
        1 8
        1 9
        1 19
        1 20
        2 16
        2 17
        2 18
        2 19
        2 20
        3 4
        2 6
        2 7
        2 8
        2 9
        2 10
        2 11
        2 12
        23 4
        2 13
        2 14
        2 15
        3 8
        3 9
        3 5
        3 6
        3 7
        2 3
        2 4
        2 5
        3 10
        3 11
        3 12
        3 13
        4 19
        4 20
        3 18
        3 19
        3 20
        4 5
        4 6
        4 7
        4 8
        4 9
        4 10
        8 21
        4 11
        5 6
        5 7
        5 8
        5 9
        5 10
        5 11
        5 12
        5 13
        5 14
        3 14
        3 15
        3 16
        3 17
        4 12
        4 13
        4 14
        8 11
        8 12
        8 13
        8 14
        4 15
        4 16
        4 17
        4 18
        5 15
        5 16
        6 7
        6 8
        6 9
        6 10
        6 11
        6 12
        6 13
        5 17
        5 18
        5 19
        5 20
        6 14
        6 15
        6 16
        6 17
        6 18
        6 21
        6 19
        6 20
        10 19
        10 20
        11 12
        11 13
        11 14
        11 15
        11 16
        7 8
        7 9
        7 10
        7 11
        7 12
        8 9
        8 10
        8 15
        8 16
        7 13
        7 14
        7 15
        7 16
        7 17
        7 18
        7 19
        9 15
        9 16
        9 17
        9 18
        9 19
        9 20
        10 11
        10 12
        10 13
        10 14
        7 20
        8 17
        8 18
        8 19
        8 20
        9 10
        9 22
        9 11
        11 20
        12 13
        12 14
        12 15
        9 12
        9 13
        9 14
        10 15
        10 16
        10 17
        10 18
        11 17
        11 18
        14 17
        14 18
        14 19
        14 20
        15 16
        11 19
        22 0
        12 16
        12 17
        12 18
        12 19
        12 20
        13 14
        16 17
        16 18
        16 19
        16 20
        17 18
        17 19
        15 19
        15 20
        """)):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            '2 1 3 4 5 6 10 11 12 13 14 15 16 17 18 7 9 20 19 8\n')

    @patch('sys.stdout', new_callable=StringIO)
    def testZeroEdges(self, mock_out):
        with patch('sys.stdin', new = StringIO(
        """0
        """)):
            maxclique_()
        self.assertEqual(mock_out.getvalue(),
            'Not valid\n')
